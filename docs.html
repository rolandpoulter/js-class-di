<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Docs</title>
	<link rel="stylesheet" type="text/css" href="http://highlightjs.org/static/styles/tomorrow.css" />
	<style type="text/css">
	body {
  font-family: 'Helvetica Neue', sans;
  background: #ffffff;
  color: #222;
  margin: 2em auto;
  padding: 0 2em;
  width: 48em;
  line-height: 1.5em;
  font-size: 16px;
  font-weight: 300;
}

img {
  margin: 0;
  border: 0;
}

p {
  margin: 1em 0;
}

a {
  color: #00213D;
}

a:visited {
  color: #00213D;
  background-color: transparent;
}

a:active {
  color: #318100;
  background-color: transparent;
}

a:hover {
  text-decoration: none;
}

p img {
  border: 0;
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  color: #003a6b;
  background-color: transparent;
  margin: 1em 0;
  font-weight: normal;
}

h1 {
  font-size: 180%;
}

h2 {
  font-size: 160%;
}

h3 {
  font-size: 140%;
}

h4 {
  font-size: 110%;
}

h5 {
  font-size: 105%;
}

h6 {
  font-size: 100%;
}

dt {
  font-style: italic;
}

dd {
  margin-bottom: 1.5em;
}

li {
  line-height: 1.5em;
}

code {
  padding: 0.1em;
  font-size: 14px;
  font-family: "Menlo", monospace;
  background-color: #f5f5f5;
  border: 1px solid #efefef;
}

pre {
  overflow: auto;
  height: 4em;
  resize: vertical;
  font-family: "Menlo", monospace;
  background-color: #fff;
  padding: 0 0.5em 0.5em 0.5em;
  line-height: 1.25em;
  border: 1px solid #efefef;
  border-bottom: 1px solid #ddd;
  -webkit-box-shadow: 0 1px 3px 0 #eee;
  -moz-box-shadow: 0 1px 3px 0 #eee;
  -ms-box-shadow: 0 1px 3px 0 #eee;
  box-shadow: 0 1px 3px 0 #eee;
}

pre code {
  background-color: transparent;
  border-width: 0;
}

blockquote {
  border-top: 1px solid #efefef;
  border-bottom: 1px solid #ddd;
  -webkit-box-shadow: 0 1px 3px 0 #eee;
  -moz-box-shadow: 0 1px 3px 0 #eee;
  -ms-box-shadow: 0 1px 3px 0 #eee;
  box-shadow: 0 1px 3px 0 #eee;
}

table {
  border-collapse: collapse;
  border: 1px solid #efefef;
  border-bottom: 1px solid #ddd;
  -webkit-box-shadow: 0 1px 3px 0 #eee;
  -moz-box-shadow: 0 1px 3px 0 #eee;
  -ms-box-shadow: 0 1px 3px 0 #eee;
  box-shadow: 0 1px 3px 0 #eee;
}

td, th {
  border: 1px solid #ddd;
  padding: 0.5em;
}

th {
  background-color: #f5f5f5;
}

	</style>
</head>
<body>
<h1 id="new-class-definition-traits-">new Class(definition, traits...);</h1>
<ol>
<li>definition - String, Function, Object.</li>
<li>traits... - String, Function, Object.</li>
</ol>
<p>Constructs JavaScript classes that provide easy type introspection and remove the need for boilerplate code.
Also has inheritance and depedency injection built in. Aims to be a lightweight, and simple implementation that
can be easily monkey patched if need be.</p>
<p>Returns a Function.</p>
<pre><code class="lang-javascript"><span class="hljs-pi">
"use strict"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Class</span> <span class="hljs-params">()</span> {</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

}

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> module !== <span class="hljs-string">'undefined'</span>) {
    module.exports = Class;

    global.Class = global.Class || Class;
}

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> window !== <span class="hljs-string">'undefined'</span>) {
    window.Class = window.Class || Class;
}
</code></pre>
<h2 id="class-version-">Class.version;</h2>
<p>Exposes the semantic version number. </p>
<pre><code class="lang-javascript">
Class.version = <span class="hljs-string">'0.0.1'</span>;
</code></pre>
<h2 id="class-construct-constructor-traits-">Class.construct(constructor, traits...);</h2>
<ol>
<li>constructor - String, Function, Object.</li>
<li>traits... - String, Function, Object.</li>
</ol>
<p>Returns a Function.</p>
<pre><code class="lang-javascript">
Class.construct = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>

    <span class="hljs-keyword">var</span> class_constructor = Class.helpers.get_class_constructor(<span class="hljs-keyword">this</span>);

    constructor = class_constructor.register(constructor);

    <span class="hljs-built_in">Object</span>.keys(class_constructor.prototype).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(method_name)</span> {</span>

        constructor[method_name] = class_constructor.prototype[method_name];

    });

    constructor.include.apply(constructor, [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>));

    class_constructor.create(constructor, constructor);

    constructor.create(constructor.prototype, constructor);

    <span class="hljs-keyword">if</span> (class_constructor !== constructor) {
        <span class="hljs-built_in">Object</span>.defineProperty(constructor, <span class="hljs-string">'constructor'</span>, {value: class_constructor});
    }

    <span class="hljs-built_in">Object</span>.defineProperty(constructor, <span class="hljs-string">'class_constructor'</span>, {value: class_constructor});

    <span class="hljs-keyword">return</span> constructor;

};
</code></pre>
<h2 id="class-helpers-">Class.helpers;</h2>
<p>A home for helper methods that do not need to be class or instance methods.</p>
<pre><code class="lang-javascript">
Class.helpers = {};
</code></pre>
<h3 id="class-helpers-eval_function-name-args-body-">Class.helpers.eval_function(name, args, body);</h3>
<pre><code class="lang-javascript">
Class.helpers.eval_function = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, args, body)</span> {</span>

    <span class="hljs-keyword">return</span> ((<span class="hljs-string">'indirect'</span>, <span class="hljs-built_in">eval</span>)(<span class="hljs-string">'(function '</span> + name + <span class="hljs-string">'('</span> + args + <span class="hljs-string">'){'</span> + body + <span class="hljs-string">'})'</span>));

};
</code></pre>
<h3 id="class-helpers-get_class_constructor-object-">Class.helpers.get_class_constructor(object);</h3>
<pre><code class="lang-javascript">
Class.helpers.get_class_constructor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object)</span> {</span>

    <span class="hljs-keyword">return</span> (
        object.class_constructor ||
        object.constructor &amp;&amp; object.constructor.class_constructor
    );

};

Class.class_constructor =
Class.prototype.class_constructor = Class;
</code></pre>
<h3 id="class-helpers-get_object_class-class_constructor-">Class.helpers.get_object_class(class_constructor);</h3>
<pre><code class="lang-javascript">
Class.helpers.get_class_namespace = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(class_constructor)</span> {</span>

    class_constructor = Class.helpers.get_class_constructor(class_constructor);

    <span class="hljs-keyword">if</span> (!class_constructor.namespace) {
        <span class="hljs-built_in">Object</span>.defineProperty(class_constructor, <span class="hljs-string">'namespace'</span>, {value: {}});
    }

    <span class="hljs-keyword">return</span> class_constructor.namespace;

};
</code></pre>
<h3 id="class-helpers-get_dependencies-object-">Class.helpers.get_dependencies(object);</h3>
<pre><code class="lang-javascript">
Class.helpers.get_dependencies = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object)</span> {</span>

    <span class="hljs-keyword">if</span> (!object.dependencies) {
        <span class="hljs-built_in">Object</span>.defineProperty(object, <span class="hljs-string">'dependencies'</span>, {value: []});
    }

    <span class="hljs-keyword">return</span> object.dependencies;

};
</code></pre>
<h3 id="class-helpers-get_super_class-constructor-">Class.helpers.get_super_class(constructor);</h3>
<pre><code class="lang-javascript">
Class.helpers.get_super_class = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>

    <span class="hljs-keyword">if</span> (!constructor.prototype) {
        constructor = constructor.constructor;
    }

    <span class="hljs-keyword">return</span> constructor.super_class;

};
</code></pre>
<h3 id="class-helpers-get_traits-constructor-">Class.helpers.get_traits(constructor);</h3>
<pre><code class="lang-javascript">
Class.helpers.get_traits = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>

    <span class="hljs-keyword">if</span> (!constructor.prototype) {
        constructor = constructor.constructor;
    }

    <span class="hljs-keyword">if</span> (!constructor.traits) {
        <span class="hljs-keyword">var</span> class_constructor = Class.helpers.get_class_constructor(constructor);

        <span class="hljs-built_in">Object</span>.defineProperty(constructor, <span class="hljs-string">'traits'</span>, {value: [
            class_constructor.instance
        ]});
    }

    <span class="hljs-keyword">return</span> constructor.traits;

};
</code></pre>
<h3 id="class-helpers-namespace_upsert_constructor-class_constructor-constructor-">Class.helpers.namespace_upsert_constructor(class_constructor, constructor);</h3>
<pre><code class="lang-javascript">
Class.helpers.namespace_upsert_constructor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(class_constructor, constructor)</span> {</span>

    <span class="hljs-keyword">var</span> namespace = Class.helpers.get_class_namespace(class_constructor);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">return</span> namespace[constructor] || Class.helpers.spawn_constructor(class_constructor, constructor);
    }

    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor.name === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">return</span> namespace[constructor.name] || constructor;
    }

    <span class="hljs-keyword">return</span> constructor;

}
</code></pre>
<h3 id="class-helpers-new_error-error_message-">Class.helpers.new_error(error_message);</h3>
<pre><code class="lang-javascript">
Class.helpers.new_error = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor, error_message)</span> {</span>

    <span class="hljs-keyword">var</span> class_constructor = Class.helpers.get_class_constructor(constructor);

    <span class="hljs-keyword">var</span> error_prefix = (class_constructor !== constructor) ?
        class_constructor + <span class="hljs-string">'('</span> + constructor + <span class="hljs-string">')'</span> :
        constructor;

    <span class="hljs-keyword">var</span> class_error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(error_prefix + <span class="hljs-string">': '</span> + error_message);

    <span class="hljs-keyword">return</span> class_error;

};
</code></pre>
<h3 id="class-helpers-parse_class_constructor_source-class_constructor-">Class.helpers.parse_class_constructor_source(class_constructor);</h3>
<pre><code class="lang-javascript">
Class.helpers.parse_class_constructor_source = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(class_constructor)</span> {</span>

    <span class="hljs-keyword">var</span> source;

    <span class="hljs-keyword">if</span> (!class_constructor.argument_names) {
        source = class_constructor.toSource();

        class_constructor.argument_names = source.substring(
            source.indexOf(<span class="hljs-string">'('</span>) + <span class="hljs-number">1</span>,
            source.indexOf(<span class="hljs-string">')'</span>)
        );
    }

    <span class="hljs-keyword">if</span> (!class_constructor.function_body) {
        source = source || class_constructor.toSource();

        class_constructor.function_body = source.substring(
            source.indexOf(<span class="hljs-string">'{'</span>) + <span class="hljs-number">1</span>,
            source.lastIndexOf(<span class="hljs-string">'}'</span>)
        )
    }

};
</code></pre>
<h3 id="class-helpers-spawn_constructor-class_constructor-constructor_name-">Class.helpers.spawn_constructor(class_constructor, constructor_name);</h3>
<pre><code class="lang-javascript">
Class.helpers.spawn_constructor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(class_constructor, constructor_name)</span> {</span>

    Class.helpers.parse_class_constructor_source(class_constructor);

    <span class="hljs-keyword">return</span> Class.helpers.eval_function(
        constructor_name,
        class_constructor.argument_names,
        class_constructor.function_body.replace(class_constructor.name, constructor_name)
    );

};
</code></pre>
<h3 id="class-helpers-spawn_prototype_constructor-class_constructor-constructor_prototype-">Class.helpers.spawn_prototype_constructor(class_constructor, constructor_prototype);</h3>
<pre><code class="lang-javascript">
Class.helpers.spawn_prototype_constructor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(class_constructor, constructor_prototype)</span> {</span>

    <span class="hljs-keyword">var</span> constructor = constructor_prototype.constructor;

    <span class="hljs-keyword">if</span> (!constructor.name) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(class_constructor, <span class="hljs-string">'Invalid constructor name.'</span>);
    }

    constructor.prototype = constructor_prototype;

    <span class="hljs-keyword">return</span> Class.helpers.namespace_upsert_constructor(class_constructor, constructor);

};
</code></pre>
<h2 id="class-instance-">Class.instance;</h2>
<p>New classes start with Class.instance as a trait. This provides default instance methods for new classes.</p>
<pre><code class="lang-javascript">
Class.instance = {};
</code></pre>
<h3 id="class-instance-initialize-">Class.instance.initialize();</h3>
<pre><code class="lang-javascript">
Class.instance.initialize = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

};
</code></pre>
<h3 id="class-instance-inject-overrides-context-">Class.instance.inject(overrides?, context?);</h3>
<pre><code class="lang-javascript">
Class.inject =
Class.prototype.inject =
Class.instance.inject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(overrides, context)</span> {</span>

    overrides = overrides || {};

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(overrides)) {
        overrides.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(override)</span> {</span>

            <span class="hljs-keyword">if</span> (override.name) {
                overrides[override.name] = override;
            }

        });
    }

    context = context || <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> namespace = Class.helper.get_class_namespace(context),
            dependencies = Class.helper.get_dependencies(context);

    <span class="hljs-keyword">if</span> (dependencies.forEach) {
        dependencies.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dependency)</span> {</span>

            context[dependency] = overrides[dependency] || namespace[dependency] || context[dependency];

        });
    }

    <span class="hljs-keyword">return</span> context;

};
</code></pre>
<h2 id="class-get-name-">Class.get(name);</h2>
<pre><code class="lang-javascript">
Class.get = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name)</span> {</span>

    <span class="hljs-keyword">var</span> namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> namespace[name];

};
</code></pre>
<h2 id="class-register-constructor-">Class.register(constructor);</h2>
<ol>
<li>constructor - String, Function, Object.</li>
</ol>
<p>Creates a new constructor function with a name and stores it in a namespace.</p>
<p>Returns a Function.</p>
<pre><code class="lang-javascript">
Class.register = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>

    <span class="hljs-keyword">var</span> namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (!constructor) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Null constructor.'</span>);
    }

    constructor = Class.helpers.namespace_upsert_constructor(<span class="hljs-keyword">this</span>, constructor);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor === <span class="hljs-string">'object'</span> &amp;&amp; constructor) {
        constructor = Class.helpers.spawn_prototype_constructor(<span class="hljs-keyword">this</span>, constructor);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor !== <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Invalid constructor.'</span>);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor.name !== <span class="hljs-string">'string'</span> || (<span class="hljs-regexp">/[^A-Za-z0-9$_]/</span>).test(constructor.name)) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Invalid constructor name.'</span>);
    }

    <span class="hljs-keyword">if</span> (namespace[constructor.name] &amp;&amp; namespace[constructor.name] !== constructor) {
        <span class="hljs-keyword">if</span> (namespace[constructor.name].toSource() === constructor.toString()) {
            <span class="hljs-keyword">return</span> namespace[constructor];
        }

        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, constructor.name + <span class="hljs-string">' is already registered.'</span>);
    }

    <span class="hljs-keyword">return</span> namespace[constructor.name] = constructor;

};
</code></pre>
<h2 id="class-set-name-value-">Class.set(name, value);</h2>
<pre><code class="lang-javascript">
Class.set = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, value)</span> {</span>

    <span class="hljs-keyword">var</span> namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> namespace[name] = value;

};
</code></pre>
<h2 id="class-prototype-">Class.prototype;</h2>
<p>Properties are copied from Class.prototype and given to new classes.
This is necessary because it is currently not possible to use Object.create()
on a Function. </p>
<h3 id="class-prototype-create-object-constructor-">Class.prototype.create(object, constructor);</h3>
<pre><code class="lang-javascript">
Class.create =
Class.prototype.create = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object, constructor)</span> {</span>

    constructor = constructor || <span class="hljs-keyword">this</span>;

    object = object || <span class="hljs-built_in">Object</span>.create(constructor.prototype);

    Class.helpers.get_dependencies(object);

    <span class="hljs-keyword">var</span> traits = Class.helpers.get_traits(<span class="hljs-keyword">this</span>);

    traits.forEach(<span class="hljs-keyword">this</span>.install.bind(constructor, object));

    <span class="hljs-keyword">return</span> object;

};
</code></pre>
<h3 id="class-prototype-decorate-trait-">Class.prototype.decorate(trait);</h3>
<pre><code class="lang-javascript">
Class.decorate =
Class.prototype.decorate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(trait)</span> {</span>

    <span class="hljs-keyword">var</span> traits = Class.helpers.get_traits(<span class="hljs-keyword">this</span>),
        namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (!trait) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Invalid trait.'</span>);
    }

    <span class="hljs-keyword">if</span> (traits.indexOf(trait) !== -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Is already dervided from: '</span> + trait);
    }

    <span class="hljs-keyword">if</span> (trait &amp;&amp; <span class="hljs-keyword">typeof</span> trait.forEeach === <span class="hljs-string">'function'</span>) {
        trait.forEach(trait.bind(<span class="hljs-keyword">this</span>));

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait === <span class="hljs-string">'string'</span> &amp;&amp; namespace[trait]) {
        trait = namespace[trait];
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">if</span> (trait.name &amp;&amp; namespace[trait.name] === trait) {
            traits[trait.name] = trait;
        }
    }

    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait !== <span class="hljs-string">'object'</span>) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Invalid derivative.'</span>);
    }

    traits.push(trait);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

};
</code></pre>
<h3 id="class-prototype-define-name-value-context-">Class.prototype.define(name, value, context);</h3>
<pre><code class="lang-javascript">
Class.define =
Class.prototype.define = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, value, context)</span> {</span>

    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'constructor'</span>) <span class="hljs-keyword">return</span>;

    context = context || <span class="hljs-keyword">this</span>.prototype || <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'dependencies'</span>) {
        <span class="hljs-keyword">var</span> dependencies = Class.helpers.get_dependencies(context);

        <span class="hljs-keyword">if</span> (value &amp;&amp; value.forEach) {
            value.forEach(push_dependency);
        }

        <span class="hljs-keyword">else</span> {
            push_dependency(value);
        }
    }

    <span class="hljs-keyword">return</span> context[name] = value;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push_dependency</span> <span class="hljs-params">(dependency)</span> {</span>

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> dependency === <span class="hljs-string">'string'</span>) {
            context.dependencies.push(dependency);
        }

    }

};
</code></pre>
<h3 id="class-prototype-derived-object-">Class.prototype.derived(object);</h3>
<ol>
<li>object - Object.</li>
</ol>
<p>Checks if an object is an instance of the this class, or if this class
is a trait of the object and therefore helped in its composition.</p>
<p>Returns a Boolean.</p>
<pre><code class="lang-javascript">
Class.derived =
Class.prototype.derived = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object)</span> {</span>

    <span class="hljs-keyword">if</span> (object === <span class="hljs-keyword">this</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">this</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (object.isPrototypeOf(<span class="hljs-keyword">this</span>.prototype)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">var</span> object_constructor = object.constructor;

    <span class="hljs-keyword">if</span> (!object_constructor) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (object_constructor === <span class="hljs-keyword">this</span> || object_constructor === <span class="hljs-built_in">Object</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">var</span> object_traits = Class.helpers.get_traits(object);

    <span class="hljs-keyword">if</span> (object_traits[<span class="hljs-keyword">this</span>.name] === <span class="hljs-keyword">this</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (object_traits.indexOf(<span class="hljs-keyword">this</span>) !== -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (object.super_class &amp;&amp; object.super_class) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.derived(object.super_class);
    }

    <span class="hljs-keyword">var</span> super_class = Class.helpers.get_super_class(object_constructor);

    <span class="hljs-keyword">if</span> (super_class &amp;&amp; super_class.derives) {
        <span class="hljs-keyword">return</span> super_class.derived(object);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

};
</code></pre>
<h3 id="class-prototype-extend-constructor-">Class.prototype.extend(constructor);</h3>
<pre><code class="lang-javascript">
Class.extend =
Class.prototype.extend = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>

    <span class="hljs-keyword">var</span> derivatives = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);

    constructor = <span class="hljs-keyword">this</span>.initialize.call(<span class="hljs-keyword">this</span>, constructor);

    constructor.inherits(<span class="hljs-keyword">this</span>);

    constructor.include.apply(constructor, derivatives);

    <span class="hljs-keyword">return</span> constructor;

};
</code></pre>
<h3 id="class-prototype-include-derivatices-">Class.prototype.include(derivatices...);</h3>
<pre><code class="lang-javascript">
Class.include =
Class.prototype.include = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>

    <span class="hljs-keyword">var</span> new_derivatives = [].slice.call(<span class="hljs-built_in">arguments</span>);

    new_derivatives.forEach(<span class="hljs-keyword">this</span>.decorate.bind(<span class="hljs-keyword">this</span>));

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

};
</code></pre>
<h3 id="class-prototype-inherits-super_class-">Class.prototype.inherits(super_class);</h3>
<pre><code class="lang-javascript">
Class.prototype.inherits = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(super_class)</span> {</span>

    <span class="hljs-comment">// TODO: allow Class or decendants to be a super_class.</span>

    <span class="hljs-keyword">var</span> current_super_class = Class.helpers.get_super_class(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (current_super_class) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Super class already exists.'</span>);
    }

    <span class="hljs-keyword">var</span> derivatives = Class.helpers.get_traits(<span class="hljs-keyword">this</span>),
        namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> super_class === <span class="hljs-string">'string'</span>) {
        super_class = namespace[super_class];
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> super_class !== <span class="hljs-string">'function'</span> || !super_class.name) {
        <span class="hljs-keyword">throw</span> Class.helpers.new_error(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Invalid super class.'</span>);
    }

    <span class="hljs-keyword">if</span> (super_class.create) {
        <span class="hljs-keyword">this</span>.prototype = super_class.create();
    }

    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.prototype = <span class="hljs-built_in">Object</span>.create(super_class.prototype);
    }

    <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>.prototype, <span class="hljs-string">'constructor'</span>, {value: <span class="hljs-keyword">this</span>});

    <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>.prototype, <span class="hljs-string">'superior'</span>, {value: super_class.prototype});

    <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>, <span class="hljs-string">'super_class'</span>, {value: super_class});

    super_class.create(<span class="hljs-keyword">this</span>.prototype, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>.create(<span class="hljs-keyword">this</span>.prototype);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

};
</code></pre>
<h3 id="class-prototype-initialize-definition-traits-">Class.prototype.initialize(definition, traits...);</h3>
<ol>
<li>definition - String, Function, Object.</li>
<li>traits... - String, Function, Object.</li>
</ol>
<p>Returns a Function.</p>
<pre><code class="lang-javascript">
Class.initialize =
Class.prototype.initialize = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>

    <span class="hljs-keyword">return</span> Class.construct.apply(<span class="hljs-keyword">this</span>.constructor, <span class="hljs-built_in">arguments</span>);

};
</code></pre>
<h3 id="class-prototype-install-object-trait-">Class.prototype.install(object, trait);</h3>
<ol>
<li>object - any Object.</li>
<li>trait - String | Function | Object.</li>
</ol>
<p>Gives an object a trait.</p>
<p>Returns this Function - class constructor.</p>
<pre><code class="lang-javascript">
Class.install =
Class.prototype.install = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object, trait)</span> {</span>

    object = object || <span class="hljs-built_in">Object</span>.create(<span class="hljs-keyword">this</span>.prototype);

    <span class="hljs-keyword">var</span> traits = Class.helpers.get_traits(<span class="hljs-keyword">this</span>),
        namespace = Class.helpers.get_class_namespace(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait === <span class="hljs-string">'string'</span>) {
        trait = namespace[trait];
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait.create === <span class="hljs-string">'function'</span>) {
            trait.create(<span class="hljs-keyword">this</span>.prototype);
        }

        <span class="hljs-keyword">else</span> {
            trait.call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.prototype);
        }
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait === <span class="hljs-string">'object'</span> &amp;&amp; trait) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trait.constructor === <span class="hljs-string">'object'</span> &amp;&amp; trait.constructor) {
            <span class="hljs-built_in">Object</span>.keys(trait.constructor).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name)</span> {</span>

                <span class="hljs-keyword">this</span>.define(name, trait.constructor[name], <span class="hljs-keyword">this</span>);

            }.bind(<span class="hljs-keyword">this</span>));
        }

        <span class="hljs-built_in">Object</span>.keys(trait).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name)</span> {</span>

            <span class="hljs-keyword">this</span>.define(name, trait[name]);

        }.bind(<span class="hljs-keyword">this</span>));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

};
</code></pre>
<h3 id="class-prototype-tosouce-">Class.prototype.toSouce();</h3>
<p>Returns a String - the raw source of the constructor function.</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">if</span> (!Class.prototype.toSource) {
    Class.toSource =
    Class.prototype.toSource =
        <span class="hljs-built_in">Function</span>.prototype.toSource ||
        <span class="hljs-built_in">Function</span>.prototype.toString;
}
</code></pre>
<h3 id="class-prototype-tostring-">Class.prototype.toString();</h3>
<p>Returns a String - the name of the class.</p>
<pre><code class="lang-javascript">
Class.toString =
Class.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;

};
</code></pre>

</body>
</html>
